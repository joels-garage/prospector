package com.joelsgarage.logic;

import junit.framework.TestCase;

public class InterpolatedFunctionTest extends TestCase {

	public void testSimple() {

		double[][] values = { //
			// 0 ... 1 ... 2 ... 3 ... 4 ... 5 ... 6 ... 7 ... 8 ... 9 ... 10
			{ 0.00, 0.00, 0.00, 0.00, 0.00, 0.00, 0.00, 0.00, 0.00, 0.00, 0.5 }, // f(0,y)
			{ 0.00, 0.02, 0.04, 0.06, 0.08, 0.10, 0.14, 0.20, 0.29, 0.50, 1.0 }, // f(0.1,y)
			{ 0.00, 0.04, 0.07, 0.10, 0.15, 0.20, 0.27, 0.37, 0.50, 0.71, 1.0 }, // f(0.2,y)
			{ 0.00, 0.06, 0.10, 0.16, 0.23, 0.30, 0.38, 0.50, 0.63, 0.80, 1.0 }, // f(0.3,y)
			{ 0.00, 0.08, 0.15, 0.23, 0.31, 0.40, 0.50, 0.62, 0.73, 0.86, 1.0 }, // f(0.4,y)
			{ 0.00, 0.10, 0.20, 0.30, 0.40, 0.50, 0.60, 0.70, 0.80, 0.90, 1.0 }, // f(0.5,y)
			{ 0.00, 0.14, 0.27, 0.38, 0.50, 0.60, 0.69, 0.76, 0.85, 0.92, 1.0 }, // f(0.6,y)
			{ 0.00, 0.20, 0.37, 0.50, 0.62, 0.70, 0.76, 0.84, 0.90, 0.94, 1.0 }, // f(0.7,y)
			{ 0.00, 0.29, 0.50, 0.63, 0.73, 0.80, 0.85, 0.90, 0.93, 0.96, 1.0 }, // f(0.8,y)
			{ 0.00, 0.50, 0.71, 0.80, 0.86, 0.90, 0.92, 0.94, 0.96, 0.98, 1.0 }, // f(0.9,y)
			{ 0.50, 1.00, 1.00, 1.00, 1.00, 1.00, 1.00, 1.00, 1.00, 1.00, 1.0 }, // f(1.0,y)
			};

		InterpolatedFunction f = new InterpolatedFunction(values);

		// f(1, y) = 1
		assertEquals(1.0, f.f(1.0, 0.1), 0.001);
		assertEquals(1.0, f.f(1.0, 0.5), 0.001);
		assertEquals(1.0, f.f(1.0, 0.9), 0.001);
		// f(0, y) = 0
		assertEquals(0.0, f.f(0.0, 0.1), 0.001);
		assertEquals(0.0, f.f(0.0, 0.5), 0.001);
		assertEquals(0.0, f.f(0.0, 0.9), 0.001);
		// f(0.5,y) = y
		assertEquals(0.45, f.f(0.5, 0.45), 0.001);
		// f(x, 0.5) = x
		assertEquals(0.45, f.f(0.45, 0.5), 0.001);
		
		// some random points
		assertEquals(0.03, f.f(0.05, 0.30), 0.001);
		assertEquals(0.2325, f.f(0.35, 0.35), 0.001);
		assertEquals(0.9364, f.f(0.72, 0.88), 0.001);
	}
}